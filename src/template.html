<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <div class="white-paper">
        <section class="paper-edit-section">
            <div class="paper-section-content">

                <div class="paper-column">
                    <ul class="paper-column-config">
                        <li class="paper-column-config-option">
                            <img src="./assets/imgs/arrow-up.png" alt="">
                        </li>
                        <li class="paper-column-config-option">
                            <img src="./assets/imgs/arrow-down.png" alt="">
                        </li>
                        <li class="paper-column-config-option">
                            <img src="./assets/imgs/cross.png" alt="">
                        </li>
                        <li class="paper-column-config-option">
                            <img src="./assets/imgs/N.png" alt="">
                        </li>
                        <li class="paper-column-config-option">
                            <img src="./assets/imgs/H.png" alt="">
                            <p class="paper-column-config-pop">
                                <span class="paper-column-height-input paper-column-config-input" contenteditable="true"></span>
                                <span>px</span>
                            </p>
                        </li>
                        <li class="paper-column-config-option">
                            <img src="./assets/imgs/C.png" alt="">
                            <p class="paper-column-config-pop">
                                <span class="paper-column-height-input paper-section-config-input" contenteditable="true"></span>
                            </p>
                        </li>
                    </ul>
                    <div class="paper-column-content">
                        <div class="paper-cell">
                            <div class="paper-cell-content" contenteditable="true">

                            </div>
                            <ul class="paper-cell-config">
                                <li class="paper-cell-config-option">
                                    <img src="./assets/imgs/arrow-up.png" alt="">
                                </li>
                                <li class="paper-cell-config-option">
                                    <img src="./assets/imgs/arrow-down.png" alt="">
                                </li>
                                <li class="paper-cell-config-option">
                                    <img src="./assets/imgs/cross.png" alt="">
                                </li>
                                <li class="paper-cell-config-option">
                                    <img src="./assets/imgs/H.png" alt="">
                                    <p class="paper-cell-config-pop">
                                        <span class="paper-cell-height-input paper-cell-config-input" contenteditable="true"></span>
                                        <span>%</span>
                                    </p>
                                </li>
                            </ul>
                        </div>
                        <div class="paper-cell">
                            <div class="paper-cell-content" contenteditable="true">
                                我是span前的内容 <span>我是一个span</span>我是span后的内容
                            </div>
                            <ul class="paper-cell-config">
                                <li class="paper-cell-config-option">
                                    <img src="./assets/imgs/arrow-up.png" alt="">
                                </li>
                                <li class="paper-cell-config-option">
                                    <img src="./assets/imgs/arrow-down.png" alt="">
                                </li>
                                <li class="paper-cell-config-option">
                                    <img src="./assets/imgs/cross.png" alt="">
                                </li>

                                <li class="paper-cell-config-option">
                                    <img src="./assets/imgs/H.png" alt="">
                                    <p class="paper-cell-config-pop">
                                        <span class="paper-config-input" contenteditable="true"></span>
                                        <span>%</span>
                                    </p>
                                </li>
                                <li class="paper-cell-config-option paper-cell-image-option">
                                    <img src="./assets/imgs/image.png" alt="">
                                    <input type="file" accept="image/gif,image/jpeg,image/jpg,image/png,image/svg">
                                    <p class="paper-cell-config-pop paper-padding-config">
                                        <span contenteditable="true" class="paper-config-input"></span>
                                        <span contenteditable="true" class="paper-config-input"></span>
                                        <span contenteditable="true" class="paper-config-input"></span>
                                        <span contenteditable="true" class="paper-config-input"></span>
                                    </p>
                                </li>
                                <li class="paper-cell-config-option paper-cell-content-option">
                                    <img src="./assets/imgs/config.png" alt="">
                                    <p class="paper-cell-config-pop paper-padding-config">
                                        <span contenteditable="true" class="paper-config-input"></span>
                                        <span contenteditable="true" class="paper-config-input"></span>
                                        <span contenteditable="true" class="paper-config-input"></span>
                                        <span contenteditable="true" class="paper-config-input"></span>
                                    </p>
                                </li>
                        </div>
                        </ul>
                    </div>
                </div>

                <div class="paper-column">
                    <ul class="paper-column-config">
                        <li class="paper-column-config-option">
                            <img src="./assets/imgs/arrow-up.png" alt="">
                        </li>
                        <li class="paper-column-config-option">
                            <img src="./assets/imgs/arrow-down.png" alt="">
                        </li>
                        <li class="paper-column-config-option">
                            <img src="./assets/imgs/cross.png" alt="">
                        </li>
                        <li class="paper-column-config-option">
                            <img src="./assets/imgs/N.png" alt="">
                        </li>
                        <li class="paper-column-config-option">
                            <img src="./assets/imgs/H.png" alt="">
                            <p class="paper-column-config-pop">
                                <span class="paper-column-height-input paper-section-config-input" contenteditable="true"></span>
                                <span>px</span>
                            </p>
                        </li>
                        <li class="paper-column-config-option">
                            <img src="./assets/imgs/C.png" alt="">
                            <p class="paper-column-config-pop">
                                <span class="paper-column-height-input paper-section-config-input" contenteditable="true"></span>
                            </p>
                        </li>
                    </ul>
                    <div class="paper-column-content">

                    </div>
                </div>
            </div>
            <ul class="paper-section-config">
                <li class="paper-section-config-option">
                    <img src="./assets/imgs/arrow-up.png" alt="">
                </li>
                <li class="paper-section-config-option">
                    <img src="./assets/imgs/arrow-down.png" alt="">
                </li>
                <li class="paper-section-config-option">
                    <img src="./assets/imgs/cross.png" alt="">
                </li>
                <li class="paper-section-config-option">
                    <img src="./assets/imgs/N.png" alt="">
                </li>
                <li class="paper-section-config-option">
                    <img src="./assets/imgs/H.png" alt="">
                    <p class="paper-section-config-pop">
                        <span class="paper-section-height-input paper-section-config-input" contenteditable="true"></span>
                        <span>px</span>
                    </p>
                </li>
                <li class="paper-section-config-option">
                    <img src="./assets/imgs/C.png" alt="">
                    <p class="paper-section-config-pop">
                        <span class="paper-section-height-input paper-section-config-input" contenteditable="true"></span>
                    </p>
                </li>
            </ul>
        </section>
        <section class="paper-add-section">
            <img src="./assets/imgs/add-icon.png" alt="">
        </section>



    </div>
    <ul class="paper-text-toolbar">
        <li class="paper-text-tool bold-tool">
            <img src="./assets/imgs/B.png" alt="">
        </li>
        <li class="paper-text-tool italic-tool">
            <img src="./assets/imgs/I.png" alt="">
        </li>
        <li class="paper-text-tool font-size-tool">
            <img src="./assets/imgs/F.png" alt="">
        </li>
    </ul>


    <script>
        var paperDom = document.querySelector(".white-paper");
        var toolbar = document.querySelector(".paper-text-toolbar");

        var selectRange = null;

        if (paperDom != null) {
            paperDom.addEventListener("mouseup", () => {
                var selected = window.getSelection();
                var range = selected.getRangeAt(0);
                selectRange = range;
                var rect = range.getBoundingClientRect();
                InsertTextToolbar(rect);
            });
        }



        function InsertTextToolbar(rect) {
            var x = rect.x + rect.width / 2;
            var y = rect.y + rect.height;
            toolbar.style.left = x + "px";
            toolbar.style.top = y + "px";
        }


        (function initTextToolbar() {
            var boldTool = toolbar.querySelector(".bold-tool");
            var italicTool = toolbar.querySelector(".italic-tool");

            boldTool.addEventListener("click", () => {
                if (selectRange) {
                    var newNode = document.createElement("p");
                    newNode.innerHTML = "大家好我是哈哈哈";
                    console.log(selectRange.extractContents());
                    selectRange.insertNode(newNode);
                    // selectRange.setStart(selectRange.startContainer, selectRange.startOffset - 1);
                    // selectRange.setEnd(selectRange.endContainer, selectRange.endOffset + 1);
                    // console.log(selectRange);
                }

            });

            italicTool.addEventListener("click", () => {


            });


        })();
    </script>
</body>

</html>